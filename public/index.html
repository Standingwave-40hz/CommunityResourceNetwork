<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CommShare</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="shared.js" defer></script>
  <script src="script.js" defer></script>
</head>
<body>
  <!-- Header will be injected by shared.js -->

  <main>
    <!-- Listing Submission Form (visible only when logged in) -->
    <form id="listingForm">
      <input type="text" id="title" placeholder="Item Title" required />
      <input type="text" id="description" placeholder="Description" required />
      <select id="category" required>
        <option value="">Select Category</option>
        <!-- Options will be injected via categories.js -->
      </select>
      <input type="text" id="contact" placeholder="Contact Info" required />
      <button type="submit">Post Listing</button>
    </form>

    <!-- Listing Filters -->
    <h2>Available Listings</h2>
    <label for="categoryFilter"><strong>Filter by Category:</strong></label>
    <select id="categoryFilter">
      <option value="">All Categories</option>
      <!-- Options will be injected via categories.js -->
    </select>

    <input type="text" id="searchMain" placeholder="Search listings..." />

    <!-- Listing Results -->
    <div id="mainListings"></div>
  </main>

  <!-- Load categories dynamically -->
  <script type="module">
    import { CATEGORIES } from './categories.js';

    const categorySelect = document.getElementById('category');
    const filterSelect = document.getElementById('categoryFilter');

    if (categorySelect) {
      CATEGORIES.forEach(cat => {
        const option = document.createElement('option');
        option.value = cat;
        option.textContent = cat;
        categorySelect.appendChild(option);
      });
    }

    if (filterSelect) {
      CATEGORIES.forEach(cat => {
        const option = document.createElement('option');
        option.value = cat;
        option.textContent = cat;
        filterSelect.appendChild(option);
      });
    }
  </script>
</body>
</html>
